<!DOCTYPE HTML >

<html>
<head>
<meta charset="utf-8">
<title>Population Map</title>
<script src="https://d3js.org/d3.v5.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<div id="map" style="width: 700px; height: 600px"></div>

<script type ="text/javascript">
    var map = new L.Map("map").setView([55, -4], 6);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

    var circlelayer = L.svg();
    circlelayer.addTo(map);

    var svg = d3.select("#map").select("svg");
    var g = d3.select("#map").select("svg").select('g');

    var defaultnum = 20
    var store
    $.ajax({
        async: false,
        type: "GET",
        url: 'http://35.211.124.163/Circles/Towns/' + defaultnum, 
        dataType: "json",
        success: function(result) {
            store = result;
    }});
    
    $.each(store, function(d, obj){
        obj.LatLng = new L.LatLng(obj.lat, obj.lng);
        console.log(obj) 
    });

    var circles=g.selectAll("circle")
   .data(store)
   .enter()
   .append("circle");


    
</script>
</head>
<body>


</body>
</html>